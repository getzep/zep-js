/**
 * This file was auto-generated by Fern from our API Definition.
 */

import { mockServerPool } from "../mock-server/MockServerPool";
import { ZepClient } from "../../src/Client";

describe("Task", () => {
    test("get", async () => {
        const server = mockServerPool.createServer();
        const client = new ZepClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            completed_at: "completed_at",
            created_at: "created_at",
            error: { code: "code", details: { key: "value" }, message: "message" },
            progress: { message: "message", stage: "stage" },
            started_at: "started_at",
            status: "status",
            task_id: "task_id",
            type: "type",
            updated_at: "updated_at",
        };
        server.mockEndpoint().get("/tasks/task_id").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.task.get("task_id");
        expect(response).toEqual({
            completedAt: "completed_at",
            createdAt: "created_at",
            error: {
                code: "code",
                details: {
                    key: "value",
                },
                message: "message",
            },
            progress: {
                message: "message",
                stage: "stage",
            },
            startedAt: "started_at",
            status: "status",
            taskId: "task_id",
            type: "type",
            updatedAt: "updated_at",
        });
    });
});
